# 摄像头功能说明

## 新增功能

### 1. 自动对焦
- 摄像头启动时会自动启用连续对焦模式
- 支持点击屏幕任意位置进行对焦
- 对焦时会显示白色圆圈动画提示

### 2. 手势缩放
- 支持双指捏合手势进行缩放
- 缩放范围根据设备摄像头能力自动调整
- 缩放时会显示当前缩放倍率

### 3. 视觉反馈
- 控制提示：显示"👆 Tap to focus • 🤏 Pinch to zoom"
- 对焦指示器：点击时显示白色圆圈动画
- 缩放指示器：缩放时显示当前倍率

## 使用方法

### 对焦
1. 点击屏幕任意位置
2. 摄像头会自动对焦到该位置
3. 对焦完成后会显示白色圆圈提示

### 缩放
1. 使用双指在屏幕上进行捏合手势
2. 向外捏合放大，向内捏合缩小
3. 缩放倍率会实时显示在右上角

## 兼容性

### 支持的设备
- 支持 MediaDevices API 的现代浏览器
- 支持摄像头对焦和缩放功能的设备
- Android 设备（Chrome、Firefox、Samsung Internet）

### 功能检测
- 应用会自动检测设备是否支持对焦和缩放
- 不支持的功能不会显示相关提示
- 控制台会输出摄像头能力信息

## 故障排除

### 对焦不工作
1. 检查设备是否支持自动对焦
2. 确保摄像头权限已授予
3. 尝试点击屏幕不同位置

### 缩放不工作
1. 检查设备是否支持数字缩放
2. 确保使用双指手势
3. 检查浏览器是否支持触摸事件

### 权限问题
1. 确保已授予摄像头权限
2. 刷新页面重新请求权限
3. 检查浏览器设置中的权限配置

## 技术实现

### 摄像头配置
```javascript
const constraints = {
  video: {
    facingMode: 'environment',
    focusMode: { ideal: 'continuous' },
    exposureMode: { ideal: 'continuous' },
    whiteBalanceMode: { ideal: 'continuous' },
    zoom: { ideal: 1.0 }
  }
};
```

### 事件处理
- 使用 `getCapabilities()` 检测功能支持
- 使用 `applyConstraints()` 设置摄像头参数
- 使用触摸事件处理手势操作

### 性能优化
- 延迟绑定事件，确保摄像头已启动
- 自动清理事件监听器
- 优化缩放灵敏度 